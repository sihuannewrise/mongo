## scp traefik/dynamic/*.yml root@192.168.2.91:/share/infra/traefik/dynamic
## scp traefik/dynamic/{1,3}*.yml sihuan@192.168.2.91:~
## scp -O -P 2222 traefik/dynamic/1_routers.yml sihuan@192.168.2.72:/share/dockume/infra/traefik/dynamic
---
http:
  routers:
    to-web:
      entryPoints:
        - websecure
      rule: Host(`knh.cloud`)
      service: web
      middlewares:
        - faAuthelia
      # tls:
      #   options: mtls-required

    to-auth:
      entryPoints:
        - websecure
      rule: Host(`auth.knh.cloud`)
      service: auth
      # tls:
      #   passThrough: {}

    to-nocodb:
      service: nocodb
      rule: Host(`nocodb.knh.cloud`)
      entryPoints:
        - websecure
      # tls: {}

    to-pihole:
      service: pihole
      rule: Host(`pihole.knh.cloud`) && PathPrefix(`/admin`)
      entryPoints:
        - websecure
      tls: {}

    to-pgadmin:
      entryPoints:
        - websecure
      rule: Host(`pgadmin.knh.cloud`)
      middlewares:
        - auth
      service: pgadmin
      tls: {}

    to-portainer:
      service: portainer
      rule: Host(`portainer.knh.cloud`)
      entryPoints:
        - websecure
      tls: {}

    to-traefik:
      service: traefik
      rule: Host(`traefik.knh.cloud`)
      entryPoints:
        - websecure
      middlewares:
        - auth
      # tls: {}
